[{"C:\\Users\\Windows\\sInvSyst\\client\\src\\index.js":"1","C:\\Users\\Windows\\sInvSyst\\client\\src\\App.jsx":"2","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\ProtectedRoute.js":"3","C:\\Users\\Windows\\sInvSyst\\client\\src\\context\\AuthContext.jsx":"4","C:\\Users\\Windows\\sInvSyst\\client\\src\\pages\\Login.jsx":"5","C:\\Users\\Windows\\sInvSyst\\client\\src\\pages\\Dashboard.jsx":"6","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\Sidebar.jsx":"7","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\Products.jsx":"8","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditProductModal.jsx":"9","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditSupplierModal.jsx":"10","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\PurchaseOrders.jsx":"11","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\StockManagement.jsx":"12","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\UserManagement.jsx":"13","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditStockModal.jsx":"14","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditOrderModal.jsx":"15","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditUserModal.jsx":"16","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\SupplierList.jsx":"17","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditCategoryModal.jsx":"18","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\index.js":"19","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\App.jsx":"20","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\ProtectedRoute.js":"21","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\Sidebar.jsx":"22","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\Products.jsx":"23","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\StockManagement.jsx":"24","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\PurchaseOrders.jsx":"25","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\UserManagement.jsx":"26","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\SupplierList.jsx":"27","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\pages\\Login.jsx":"28","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\context\\AuthContext.jsx":"29","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\pages\\Dashboard.jsx":"30","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditProductModal.jsx":"31","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditStockModal.jsx":"32","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditCategoryModal.jsx":"33","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditOrderModal.jsx":"34","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditSupplierModal.jsx":"35","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditUserModal.jsx":"36"},{"size":283,"mtime":1747901707239,"results":"37","hashOfConfig":"38"},{"size":1635,"mtime":1748070526310,"results":"39","hashOfConfig":"38"},{"size":350,"mtime":1747919772043,"results":"40","hashOfConfig":"38"},{"size":2374,"mtime":1747994591222,"results":"41","hashOfConfig":"38"},{"size":4268,"mtime":1748012279473,"results":"42","hashOfConfig":"38"},{"size":4439,"mtime":1748012375889,"results":"43","hashOfConfig":"38"},{"size":1783,"mtime":1748014284917,"results":"44","hashOfConfig":"38"},{"size":9755,"mtime":1748078226413,"results":"45","hashOfConfig":"38"},{"size":5502,"mtime":1748075813426,"results":"46","hashOfConfig":"38"},{"size":4659,"mtime":1747909072317,"results":"47","hashOfConfig":"38"},{"size":8898,"mtime":1748062914701,"results":"48","hashOfConfig":"38"},{"size":9391,"mtime":1748069804213,"results":"49","hashOfConfig":"38"},{"size":6627,"mtime":1748070590515,"results":"50","hashOfConfig":"38"},{"size":3546,"mtime":1747909139037,"results":"51","hashOfConfig":"38"},{"size":5820,"mtime":1747909172200,"results":"52","hashOfConfig":"38"},{"size":7327,"mtime":1747908766963,"results":"53","hashOfConfig":"38"},{"size":7387,"mtime":1748062176603,"results":"54","hashOfConfig":"38"},{"size":1525,"mtime":1747908394635,"results":"55","hashOfConfig":"38"},{"size":294,"mtime":1748098407757,"results":"56","hashOfConfig":"57"},{"size":1679,"mtime":1748098407750,"results":"58","hashOfConfig":"57"},{"size":457,"mtime":1748101494334,"results":"59","hashOfConfig":"57"},{"size":1783,"mtime":1748098407754,"results":"60","hashOfConfig":"57"},{"size":10279,"mtime":1748102035133,"results":"61","hashOfConfig":"57"},{"size":9652,"mtime":1748098407755,"results":"62","hashOfConfig":"57"},{"size":9149,"mtime":1748098407753,"results":"63","hashOfConfig":"57"},{"size":6825,"mtime":1748098407755,"results":"64","hashOfConfig":"57"},{"size":7597,"mtime":1748098407755,"results":"65","hashOfConfig":"57"},{"size":4388,"mtime":1748098407757,"results":"66","hashOfConfig":"57"},{"size":2666,"mtime":1748101464894,"results":"67","hashOfConfig":"57"},{"size":4576,"mtime":1748098407757,"results":"68","hashOfConfig":"57"},{"size":5502,"mtime":1748101462783,"results":"69","hashOfConfig":"57"},{"size":3546,"mtime":1748098407751,"results":"70","hashOfConfig":"57"},{"size":1525,"mtime":1748098407750,"results":"71","hashOfConfig":"57"},{"size":5820,"mtime":1748098407751,"results":"72","hashOfConfig":"57"},{"size":4659,"mtime":1748098407752,"results":"73","hashOfConfig":"57"},{"size":7327,"mtime":1748098407752,"results":"74","hashOfConfig":"57"},{"filePath":"75","messages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},"1counne",{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"80","messages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"82","messages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"86","messages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"88","messages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"90","messages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"94","messages":"95","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"96","messages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98","usedDeprecatedRules":"77"},{"filePath":"99","messages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"101","messages":"102","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"103","messages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"105","messages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"107","messages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"109","messages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"111","messages":"112","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"113","messages":"114","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},"1uhufy",{"filePath":"116","messages":"117","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"118","messages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"120","messages":"121","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"122","messages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"124","messages":"125","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"126","messages":"127","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"128","usedDeprecatedRules":"115"},{"filePath":"129","messages":"130","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"131","messages":"132","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"133","messages":"134","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"135","messages":"136","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"137","messages":"138","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"139","messages":"140","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"141","messages":"142","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"143","messages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"145","messages":"146","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"147","messages":"148","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"149","messages":"150","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},"C:\\Users\\Windows\\sInvSyst\\client\\src\\index.js",[],["151","152"],"C:\\Users\\Windows\\sInvSyst\\client\\src\\App.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\context\\AuthContext.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\pages\\Login.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\pages\\Dashboard.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\Sidebar.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\Products.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditProductModal.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditSupplierModal.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\PurchaseOrders.jsx",["153","154","155"],"import React, { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport { Table, Button, Form, InputGroup, Spinner, Alert, Card } from 'react-bootstrap';\nimport { FaPlus, FaEdit } from 'react-icons/fa';\nimport AddEditOrderModal from './AddEditOrderModal';\n\nconst PurchaseOrders = () => {\n  const [orders, setOrders] = useState([]);\n  const [suppliers, setSuppliers] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [searchOrderID, setSearchOrderID] = useState('');\n  const [searchSupplier, setSearchSupplier] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [editOrder, setEditOrder] = useState(null);\n  const [editIndex, setEditIndex] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const editPopupRef = useRef(null);\n\n  useEffect(() => {\n    fetchOrders();\n    fetchSuppliers();\n    fetchProducts();\n    // Close edit popup on outside click\n    const handleClickOutside = (event) => {\n      if (editPopupRef.current && !editPopupRef.current.contains(event.target)) {\n        setEditIndex(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const fetchOrders = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const res = await axios.get('http://localhost:5000/api/purchaseorder');\n      setOrders(res.data); // Even if res.data is [], that's not an error!\n    } catch (err) {\n      setError('Failed to fetch orders.');\n    }\n    setLoading(false);\n  };\n\n  const fetchSuppliers = async () => {\n    const res = await axios.get('http://localhost:5000/api/suppliers');\n    setSuppliers(res.data);\n  };\n\n  const fetchProducts = async () => {\n    const res = await axios.get('http://localhost:5000/api/products');\n    setProducts(res.data);\n  };\n\n  // Filtered orders\n  const filteredOrders = orders.filter(order =>\n    order.purchase_OrderID.toString().toLowerCase().includes(searchOrderID.toLowerCase()) &&\n    (searchSupplier === '' || (order.supplier_Company && order.supplier_Company === searchSupplier))\n  );\n\n  // --- CRUD Handlers ---\n\n  const handleSave = async (order) => {\n    setLoading(true);\n    setError('');\n    try {\n      if (editOrder) {\n        await axios.put(`http://localhost:5000/api/purchaseorder/${editOrder.purchase_OrderID}`, order);\n      } else {\n        await axios.post('http://localhost:5000/api/purchaseorder', order);\n      }\n      fetchOrders();\n      setShowModal(false);\n      setEditOrder(null);\n      setEditIndex(null);\n    } catch {\n      setError('Failed to save order.');\n      setLoading(false);\n    }\n  };\n\n  const handleEdit = (order, idx) => {\n    setEditOrder(order);\n    setEditIndex(idx);\n    setShowModal(false);\n    setError('');\n  };\n\n  const handleDelete = async (id) => {\n    if (window.confirm('Are you sure you want to delete this order?')) {\n      setLoading(true);\n      setError('');\n      try {\n        await axios.delete(`http://localhost:5000/api/purchaseorder/${id}`);\n        fetchOrders();\n        setEditOrder(null);\n        setEditIndex(null);\n      } catch {\n        setError('Failed to delete order.');\n        setLoading(false);\n      }\n    }\n  };\n\n  // Show Add\n  const handleShowAdd = () => {\n    setEditOrder(null);\n    setShowModal(true);\n    setEditIndex(null);\n    setError('');\n  };\n\n  return (\n    <Card className=\"shadow-sm border-0 rounded-4 mb-4\" style={{ maxWidth: 1100, margin: '0 auto', padding: 24 }}>\n      <Card.Header className=\"bg-white border-0 d-flex justify-content-between align-items-center\">\n        <h5 className=\"mb-0 fw-bold\">Purchase Orders</h5>\n        <Button variant=\"primary\" size=\"sm\" onClick={handleShowAdd}>Add Order</Button>\n      </Card.Header>\n      <Card.Body>\n        {/* Search Bar */}\n        <div className=\"d-flex mb-3 gap-3\">\n          <InputGroup>\n            <Form.Control\n              placeholder=\"Order ID\"\n              value={searchOrderID}\n              onChange={e => setSearchOrderID(e.target.value)}\n              style={{ minWidth: 220 }}\n            />\n          </InputGroup>\n          <InputGroup>\n            <Form.Select\n              value={searchSupplier}\n              onChange={e => setSearchSupplier(e.target.value)}\n              style={{ minWidth: 180 }}\n            >\n              <option value=\"\">Supplier</option>\n              {suppliers.map(sup => (\n                <option key={sup.supplier_ID} value={sup.supplier_Company}>{sup.supplier_Company}</option>\n              ))}\n            </Form.Select>\n          </InputGroup>\n        </div>\n\n        {/* Purchase Order Table */}\n        <div style={{ background: '#f8f9f9', borderRadius: 12, padding: 0, boxShadow: '0 2px 8px #0001' }}>\n          <div className=\"d-flex align-items-center justify-content-between px-4 py-2\" style={{ borderBottom: '1px solid #eee' }}>\n            <span className=\"fw-bold\" style={{ fontSize: 22 }}>Purchase Order</span>\n            <Button variant=\"light\" onClick={handleShowAdd} style={{ borderRadius: '50%', fontSize: 22, width: 38, height: 38 }}>\n              <FaPlus />\n            </Button>\n          </div>\n          <Table hover responsive className=\"mb-0\" style={{ background: 'transparent' }}>\n            <thead>\n              <tr>\n                <th>Order ID</th>\n                <th>Supplier</th>\n                <th>Contact</th>\n                <th>Date</th>\n                <th>Quantity</th>\n                <th>Price</th>\n                <th>Status</th>\n                <th style={{ width: 60 }}></th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.length === 0 ? (\n                <tr>\n                  <td colSpan=\"8\" className=\"text-center text-muted\">No orders found.</td>\n                </tr>\n              ) : (\n                orders.map((order, idx) => (\n                  <tr key={order.purchase_OrderID}>\n                    <td>{order.purchase_OrderID}</td>\n                    <td>{order.supplier_Company}</td>\n                    <td>{order.contact_Person}</td>\n                    <td>{order.order_Date}</td>\n                    <td>{order.quantity_Ordered}</td>\n                    <td>{order.unit_Price}</td>\n                    <td>{order.status}</td>\n                    <td style={{ position: 'relative' }}>\n                      <Button\n                        variant=\"outline-success\"\n                        size=\"sm\"\n                        style={{ borderRadius: '50%' }}\n                        onClick={() => handleEdit(order, idx)}\n                      >\n                        <FaEdit />\n                      </Button>\n                      {/* Edit/Delete Popup */}\n                      {editIndex === idx && (\n                        <div\n                          ref={editPopupRef}\n                          style={{\n                            position: 'absolute',\n                            top: 0,\n                            right: 40,\n                            background: '#fff',\n                            border: '1px solid #ccc',\n                            borderRadius: 8,\n                            boxShadow: '0 2px 8px #0002',\n                            zIndex: 10,\n                            padding: 12,\n                            display: 'flex',\n                            flexDirection: 'column',\n                            gap: 8\n                          }}\n                        >\n                          <Button\n                            variant=\"success\"\n                            size=\"sm\"\n                            onClick={() => setShowModal(true)}\n                            style={{ minWidth: 70 }}\n                          >\n                            Edit\n                          </Button>\n                          <Button\n                            variant=\"danger\"\n                            size=\"sm\"\n                            onClick={() => handleDelete(order.purchase_OrderID)}\n                            style={{ minWidth: 70 }}\n                          >\n                            Delete\n                          </Button>\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </Table>\n        </div>\n\n        {/* Add/Edit Order Modal */}\n        {showModal && (\n          <AddEditOrderModal\n            show={showModal}\n            handleClose={() => { setShowModal(false); setEditOrder(null); }}\n            handleSave={handleSave}\n            initial={editOrder}\n            suppliers={suppliers}\n            products={products}\n          />\n        )}\n        {error && <Alert variant=\"danger\" className=\"mt-3\">{error}</Alert>}\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default PurchaseOrders;","C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\StockManagement.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\UserManagement.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditStockModal.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditOrderModal.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditUserModal.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\SupplierList.jsx",[],"C:\\Users\\Windows\\sInvSyst\\client\\src\\components\\AddEditCategoryModal.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\index.js",[],["156","157"],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\App.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\Sidebar.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\Products.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\StockManagement.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\PurchaseOrders.jsx",["158","159","160"],"import React, { useEffect, useState, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { Table, Button, Form, InputGroup, Spinner, Alert, Card } from 'react-bootstrap';\r\nimport { FaPlus, FaEdit } from 'react-icons/fa';\r\nimport AddEditOrderModal from './AddEditOrderModal';\r\n\r\nconst PurchaseOrders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [searchOrderID, setSearchOrderID] = useState('');\r\n  const [searchSupplier, setSearchSupplier] = useState('');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editOrder, setEditOrder] = useState(null);\r\n  const [editIndex, setEditIndex] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const editPopupRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n    fetchSuppliers();\r\n    fetchProducts();\r\n    // Close edit popup on outside click\r\n    const handleClickOutside = (event) => {\r\n      if (editPopupRef.current && !editPopupRef.current.contains(event.target)) {\r\n        setEditIndex(null);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/purchaseorder');\r\n      setOrders(res.data); // Even if res.data is [], that's not an error!\r\n    } catch (err) {\r\n      setError('Failed to fetch orders.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchSuppliers = async () => {\r\n    const res = await axios.get('http://localhost:5000/api/suppliers');\r\n    setSuppliers(res.data);\r\n  };\r\n\r\n  const fetchProducts = async () => {\r\n    const res = await axios.get('http://localhost:5000/api/products');\r\n    setProducts(res.data);\r\n  };\r\n\r\n  // Filtered orders\r\n  const filteredOrders = orders.filter(order =>\r\n    order.purchase_OrderID.toString().toLowerCase().includes(searchOrderID.toLowerCase()) &&\r\n    (searchSupplier === '' || (order.supplier_Company && order.supplier_Company === searchSupplier))\r\n  );\r\n\r\n  // --- CRUD Handlers ---\r\n\r\n  const handleSave = async (order) => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      if (editOrder) {\r\n        await axios.put(`http://localhost:5000/api/purchaseorder/${editOrder.purchase_OrderID}`, order);\r\n      } else {\r\n        await axios.post('http://localhost:5000/api/purchaseorder', order);\r\n      }\r\n      fetchOrders();\r\n      setShowModal(false);\r\n      setEditOrder(null);\r\n      setEditIndex(null);\r\n    } catch {\r\n      setError('Failed to save order.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (order, idx) => {\r\n    setEditOrder(order);\r\n    setEditIndex(idx);\r\n    setShowModal(false);\r\n    setError('');\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this order?')) {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        await axios.delete(`http://localhost:5000/api/purchaseorder/${id}`);\r\n        fetchOrders();\r\n        setEditOrder(null);\r\n        setEditIndex(null);\r\n      } catch {\r\n        setError('Failed to delete order.');\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Show Add\r\n  const handleShowAdd = () => {\r\n    setEditOrder(null);\r\n    setShowModal(true);\r\n    setEditIndex(null);\r\n    setError('');\r\n  };\r\n\r\n  return (\r\n    <Card className=\"shadow-sm border-0 rounded-4 mb-4\" style={{ maxWidth: 1100, margin: '0 auto', padding: 24 }}>\r\n      <Card.Header className=\"bg-white border-0 d-flex justify-content-between align-items-center\">\r\n        <h5 className=\"mb-0 fw-bold\">Purchase Orders</h5>\r\n        <Button variant=\"primary\" size=\"sm\" onClick={handleShowAdd}>Add Order</Button>\r\n      </Card.Header>\r\n      <Card.Body>\r\n        {/* Search Bar */}\r\n        <div className=\"d-flex mb-3 gap-3\">\r\n          <InputGroup>\r\n            <Form.Control\r\n              placeholder=\"Order ID\"\r\n              value={searchOrderID}\r\n              onChange={e => setSearchOrderID(e.target.value)}\r\n              style={{ minWidth: 220 }}\r\n            />\r\n          </InputGroup>\r\n          <InputGroup>\r\n            <Form.Select\r\n              value={searchSupplier}\r\n              onChange={e => setSearchSupplier(e.target.value)}\r\n              style={{ minWidth: 180 }}\r\n            >\r\n              <option value=\"\">Supplier</option>\r\n              {suppliers.map(sup => (\r\n                <option key={sup.supplier_ID} value={sup.supplier_Company}>{sup.supplier_Company}</option>\r\n              ))}\r\n            </Form.Select>\r\n          </InputGroup>\r\n        </div>\r\n\r\n        {/* Purchase Order Table */}\r\n        <div style={{ background: '#f8f9f9', borderRadius: 12, padding: 0, boxShadow: '0 2px 8px #0001' }}>\r\n          <div className=\"d-flex align-items-center justify-content-between px-4 py-2\" style={{ borderBottom: '1px solid #eee' }}>\r\n            <span className=\"fw-bold\" style={{ fontSize: 22 }}>Purchase Order</span>\r\n            <Button variant=\"light\" onClick={handleShowAdd} style={{ borderRadius: '50%', fontSize: 22, width: 38, height: 38 }}>\r\n              <FaPlus />\r\n            </Button>\r\n          </div>\r\n          <Table hover responsive className=\"mb-0\" style={{ background: 'transparent' }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Order ID</th>\r\n                <th>Supplier</th>\r\n                <th>Contact</th>\r\n                <th>Date</th>\r\n                <th>Quantity</th>\r\n                <th>Price</th>\r\n                <th>Status</th>\r\n                <th style={{ width: 60 }}></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {orders.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"text-center text-muted\">No orders found.</td>\r\n                </tr>\r\n              ) : (\r\n                orders.map((order, idx) => (\r\n                  <tr key={order.purchase_OrderID}>\r\n                    <td>{order.purchase_OrderID}</td>\r\n                    <td>{order.supplier_Company}</td>\r\n                    <td>{order.contact_Person}</td>\r\n                    <td>{order.order_Date}</td>\r\n                    <td>{order.quantity_Ordered}</td>\r\n                    <td>{order.unit_Price}</td>\r\n                    <td>{order.status}</td>\r\n                    <td style={{ position: 'relative' }}>\r\n                      <Button\r\n                        variant=\"outline-success\"\r\n                        size=\"sm\"\r\n                        style={{ borderRadius: '50%' }}\r\n                        onClick={() => handleEdit(order, idx)}\r\n                      >\r\n                        <FaEdit />\r\n                      </Button>\r\n                      {/* Edit/Delete Popup */}\r\n                      {editIndex === idx && (\r\n                        <div\r\n                          ref={editPopupRef}\r\n                          style={{\r\n                            position: 'absolute',\r\n                            top: 0,\r\n                            right: 40,\r\n                            background: '#fff',\r\n                            border: '1px solid #ccc',\r\n                            borderRadius: 8,\r\n                            boxShadow: '0 2px 8px #0002',\r\n                            zIndex: 10,\r\n                            padding: 12,\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: 8\r\n                          }}\r\n                        >\r\n                          <Button\r\n                            variant=\"success\"\r\n                            size=\"sm\"\r\n                            onClick={() => setShowModal(true)}\r\n                            style={{ minWidth: 70 }}\r\n                          >\r\n                            Edit\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"danger\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleDelete(order.purchase_OrderID)}\r\n                            style={{ minWidth: 70 }}\r\n                          >\r\n                            Delete\r\n                          </Button>\r\n                        </div>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n\r\n        {/* Add/Edit Order Modal */}\r\n        {showModal && (\r\n          <AddEditOrderModal\r\n            show={showModal}\r\n            handleClose={() => { setShowModal(false); setEditOrder(null); }}\r\n            handleSave={handleSave}\r\n            initial={editOrder}\r\n            suppliers={suppliers}\r\n            products={products}\r\n          />\r\n        )}\r\n        {error && <Alert variant=\"danger\" className=\"mt-3\">{error}</Alert>}\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default PurchaseOrders;","C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\UserManagement.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\SupplierList.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\pages\\Login.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\context\\AuthContext.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\pages\\Dashboard.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditProductModal.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditStockModal.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditCategoryModal.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditOrderModal.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditSupplierModal.jsx",[],"C:\\Users\\Windows\\SInvSystem\\inv_System\\client\\src\\components\\AddEditUserModal.jsx",[],{"ruleId":"161","replacedBy":"162"},{"ruleId":"163","replacedBy":"164"},{"ruleId":"165","severity":1,"message":"166","line":3,"column":43,"nodeType":"167","messageId":"168","endLine":3,"endColumn":50},{"ruleId":"165","severity":1,"message":"169","line":16,"column":10,"nodeType":"167","messageId":"168","endLine":16,"endColumn":17},{"ruleId":"165","severity":1,"message":"170","line":57,"column":9,"nodeType":"167","messageId":"168","endLine":57,"endColumn":23},{"ruleId":"161","replacedBy":"171"},{"ruleId":"163","replacedBy":"172"},{"ruleId":"165","severity":1,"message":"166","line":3,"column":43,"nodeType":"167","messageId":"168","endLine":3,"endColumn":50},{"ruleId":"165","severity":1,"message":"169","line":16,"column":10,"nodeType":"167","messageId":"168","endLine":16,"endColumn":17},{"ruleId":"165","severity":1,"message":"170","line":57,"column":9,"nodeType":"167","messageId":"168","endLine":57,"endColumn":23},"no-native-reassign",["173"],"no-negated-in-lhs",["174"],"no-unused-vars","'Spinner' is defined but never used.","Identifier","unusedVar","'loading' is assigned a value but never used.","'filteredOrders' is assigned a value but never used.",["173"],["174"],"no-global-assign","no-unsafe-negation"]